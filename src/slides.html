<section>
  <h1>&lt;select multiple&gt; をドロップダウンにする</h1>
  <aside style="text-align: right;">
    <a target="_blank" rel="noopener nofollow" href="https://connpass.com/dashboard/">We Are JavaScripters! @34th</a><br>
    <time datetime="2019-07-22">2019-07-22</time><br>
    null
  </aside>
</section>

<section>
  <h2>きっかけ</h2>
  <a target="_blank" rel="noopener nofollow" href="https://qiita.com/hand-dot/items/1a98ab5d16cd2c2e94f4"><img src="assets/images/preface.png"></a>
</section>

<section>
  <h2>&lt;select multiple&gt; と &lt;select&gt;</h2>
  <div class="code">
    <code src="../.diff/00.html"></code>
    <iframe src="codes/00.html"></iframe>
  </div>
  <h2 class="next">&lt;select multiple&gt; の問題点</h2>
</section>

<section>
  <h2>&lt;select multiple&gt; の問題点</h2>
  <ul style="padding: 60px 0;">
    <li><a target="_blank" rel="noopener nofollow" href="https://qiita.com/hand-dot/items/1a98ab5d16cd2c2e94f4">元記事参照</a></li>
    <li>モバイルと PC とで見た目が異なる<br>（高さが異なるのでレイアウトが崩れる）</li>
    <li>[Ctrl or Cmd + クリック] わずらわしい</li>
  </ul>
</section>

<section>
  <h3>そだねー</h3>
  <p>（平成最後のユーキャン新語・流行語大賞）</p>
</section>

<section>
  <h3>ということで<br>私なりに実装しようと試みたのですが<br>びっくりするほど難しかったので共有します。</h3>
  <p>（しかも Chromium ベースのブラウザーでしか動きません。）</p>
</section>

<section>
  <h3>まずは見た目を単数選択の select に合わせます。</h3>
</section>

<section>
  <h2>見た目を単数選択の select に合わせる</h2>
  <div class="code">
    <code src="../.diff/01.html"></code>
    <iframe src="codes/01.html"></iframe>
  </div>
  <h2 class="next">選択項目数をかぞえる</h2>
</section>

<section>
  <h2>選択項目数をかぞえる</h2>
  <div class="code">
    <code src="../.diff/02.html"></code>
    <iframe src="codes/02.html"></iframe>
  </div>
  <h2 class="next">選択項目だけを横並びに表示する</h2>
</section>

<section>
  <h2>選択項目だけを横並びに表示する</h2>
  <div class="code">
    <code src="../.diff/04.html"></code>
    <iframe src="codes/04.html"></iframe>
  </div>
  <h2 class="next">項目をカンマ区切りにする</h2>
</section>

<section>
  <h2>項目をカンマ区切りにする</h2>
  <div class="code">
    <code src="../.diff/05.html"></code>
    <iframe src="codes/05.html"></iframe>
  </div>
  <h2 class="next">項目がはみ出ないようにする</h2>
</section>

<section>
  <h2>項目がはみ出ないようにする</h2>
  <div class="code">
    <code src="../.diff/06.html"></code>
    <iframe src="codes/06.html"></iframe>
  </div>
</section>

<section>
  <h3>overflow 効かない</h3>
  <p>（インラインスタイルで !important つけても効かない）</p>
</section>

<section>
  <h3>やっぱ appearance: menulist は背景にしよう</h3>
</section>

<section>
  <h2>項目がはみ出ないようにする</h2>
  <div class="code">
    <code src="../.diff/07.html"></code>
    <iframe src="codes/07.html"></iframe>
  </div>
  <h2 class="next">サイズと余白を調整する</h2>
</section>

<section>
  <h2>サイズと余白を調整する</h2>
  <div class="code">
    <code src="../.diff/08.html"></code>
    <iframe src="codes/08.html"></iframe>
  </div>
  <h2 class="next">項目の背景を透明にする</h2>
</section>

<section>
  <h2>項目の背景を透明にする</h2>
  <div class="code">
    <code src="../.diff/09.html"></code>
    <iframe src="codes/09.html"></iframe>
  </div>
</section>

<section>
  <h3>background-color 効かない</h3>
  <p>（インラインスタイルで !important つけても効かない）</p>
</section>

<section>
  <h3>background-image 効くかな</h3>
</section>

<section>
  <h2>項目の背景を白にする</h2>
  <div class="code">
    <code src="../.diff/10.html"></code>
    <iframe src="codes/10.html"></iframe>
  </div>
</section>

<section>
  <h3>やっぱ白じゃダメだ<br>透明じゃなきゃ</h3>
</section>

<section>
  <h3>option 要素そのものは表示せずに<br>option の中身だけを表示してみよう</h3>
</section>

<section>
  <h2>項目の背景を透明にする</h2>
  <div class="code">
    <code src="../.diff/11.html"></code>
    <iframe src="codes/11.html"></iframe>
  </div>
  <h2 class="next">項目のクリックを無効化する</h2>
</section>

<section>
  <h2>項目のクリックを無効化する</h2>
  <div class="code">
    <code src="../.diff/12.html"></code>
    <iframe src="codes/12.html"></iframe>
  </div>
</section>

<section>
  <h3>ここまではいい感じ</h3>
</section>

<section>
  <h3>ここからはドロップダウンしたときの挙動</h3>
</section>

<section>
  <h2>ドロップダウン時に高さが変わらないようにする</h2>
  <div class="code">
    <code src="../.diff/13.html"></code>
    <iframe src="codes/13.html"></iframe>
  </div>
  <h2 class="next">未選択項目の背景を白にする</h2>
</section>

<section>
  <h2>未選択項目の背景を白にする</h2>
  <div class="code">
    <code src="../.diff/14.html"></code>
    <iframe src="codes/14.html"></iframe>
  </div>
  <h2 class="next">重なり順序を手前にする</h2>
</section>

<section>
  <h2>重なり順序を手前にする</h2>
  <div class="code">
    <code src="../.diff/15.html"></code>
    <iframe src="codes/15.html"></iframe>
  </div>
  <h2 class="next">選択項目にチェックマークをつける</h2>
</section>

<section>
  <h2>選択項目にチェックマークをつける</h2>
  <div class="code">
    <code src="../.diff/16.html"></code>
    <iframe src="codes/16.html"></iframe>
  </div>
  <h2 class="next">項目クリックの挙動をチェックボックスっぽくする</h2>
</section>

<section>
  <h2>項目クリックの挙動をチェックボックスっぽくする</h2>
  <div class="code">
    <code src="../.diff/17.html"></code>
    <iframe src="codes/17.html"></iframe>
  </div>
</section>

<section>
  <h3>スクリプトなしでできなかった</h3>
</section>

<section>
  <h3>実はカーソルキーとかスペースキーとかも<br>ハンドリングが必要だったり...</h3>
  <p style="margin-bottom: 80px;">（今回は気づかなかったことに...）</p>
  <h2 class="next">マウスオーバー項目を強調する</h2>
</section>

<section>
  <h2>マウスオーバー項目を強調する</h2>
  <div class="code">
    <code src="../.diff/18.html"></code>
    <iframe src="codes/18.html"></iframe>
  </div>
  <h2 class="next">残課題</h2>
</section>

<section style="text-align: left;">
  <h2>どうにかなりそうな課題</h2>
  <ul style="padding: 20px 0 40px 40px;">
    <li>キーボードハンドリング</li>
    <li>&lt;optgroup&gt;</li>
  </ul>
  <h2>どうにもならなそうな課題</h2>
  <ul style="padding: 20px 0 0 40px;">
    <li>ドロップダウンの高さが調整できない</li>
    <li>そもそもフォーカスでドロップダウンしてよいものか</li>
    <li>Firefox 対応</li>
    <li>Safari 対応</li>
    <li>InternetE</li>
  </ul>
  <h2 class="next">所感</h2>
</section>

<section>
  <h2>所感</h2>
  <ul>
    <li>私レベルでは &lt;select&gt; のカスタマイズはむずかしい</li>
    <li>select にラッパー要素をつけるルールを課せば<br>もう少しどうにかなりそう</li>
    <li>display: contents の使いどころを知った</li>
  </ul>
</section>

<section>
  <h3>ご清聴ありがとうございました</h3>
  <p>p.s. ↓こういうことやりたいひとは <a target="_blank" href="https://github.com/luncheon/ripplet.js">ripplet.js</a> みてね</p>
  <iframe src="codes/99.html" style="height: 240px; transform-origin: 50% 0; transform: scale(2);"></iframe>
</section>
